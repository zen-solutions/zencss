<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Image Gallery with Pagination</title>
    <link rel="stylesheet" href="../../css/zen.css">
    <script src="../../js/zencss.js"></script>
    <style>
        /* Image Gallery Styles */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            grid-gap: 10px;
        }

        .image-gallery img {
            width: 100%;
            height: auto;
            cursor: pointer;
        }

        /* Pagination Styles */
        .pagination-nav {
            text-align: center;
            padding: 20px;
        }

        .pagination-nav .item {
            margin: 0 5px;
            cursor: pointer;
        }

        .pagination-nav .current {
            font-weight: bold;
        }
    </style>
</head>
<body class="zen">
    <!-- Image Gallery -->
    <div class="image-gallery">
        <!-- Images will be loaded here by JavaScript -->
    </div>

    <!-- Pagination -->
    <div class="pagination-nav center-flex">
        <a href="#" class="item" data-page="prev">Previous</a>
        <!-- Page numbers will be generated by JavaScript -->
        <a href="#" class="item" data-page="next">Next</a>
    </div>

    <!-- Modal -->
    <z-modal>
        <h3 slot="title">Image Preview</h3>
        <img src="" id="modal-image">
        <button slot="footer" class="modal-close">Close</button>
    </z-modal>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const gallery = document.querySelector('.image-gallery');
            const modal = document.querySelector('z-modal');
            const paginationNav = document.querySelector('.pagination-nav');
            let currentPage = 1;
            const imagesPerPage = 12;
            const images = [
            { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },                { src: '../../img/placeholder/scottwebb.png', text: 'Photo: Scott Webb' },
                { src: '../../img/placeholder/SimonBerger.png', text: 'Photo: Simon Berger' },
                { src: '../../img/placeholder/fernando-jorge.jpg', text: 'Photo: Fernando Jorge' },
                // ... Add more image objects here
            ];
            const totalPages = Math.ceil(images.length / imagesPerPage);

function openModal(src, text) {
    const modalImage = document.createElement('img');
    modalImage.src = src;
    modalImage.style.maxWidth = '100%'; // Limit width to modal's width
    modalImage.style.maxHeight = '70vh'; // Limit height to 70% of the viewport height
    modalImage.style.objectFit = 'contain'; // Maintain aspect ratio
    modalImage.style.margin = 'auto'; // Center the image

    const modalText = document.createElement('p');
    modalText.textContent = text;
    modalText.style.textAlign = 'center';

    const modalBody = modal.shadowRoot.querySelector('.modal-body');
    const modalWrapper = modal.shadowRoot.querySelector('.modal-wrapper');
    const modalHeader = modal.shadowRoot.querySelector('.modal-header');

    modalBody.innerHTML = '';
    modalBody.style.display = 'flex';
    modalBody.style.flexDirection = 'column';
    modalBody.style.alignItems = 'center';
    modalBody.style.justifyContent = 'center';
    modalBody.style.overflowY = 'hidden'; // Prevent scrolling within the modal body
    modalBody.style.maxHeight = '80vh'; // Override the max-height set in the shadow DOM
    modalBody.appendChild(modalImage);
    modalBody.appendChild(modalText);

    modalHeader.style.display = 'none'; // Hide the modal header

    // Adjust modal size for larger screens
    if (window.innerWidth >= 768) {
        modalWrapper.style.cssText = 'width: 60% !important; max-width: 80vw !important;';
    } else {
        modalWrapper.style.cssText = 'width: 90% !important; max-width: 95vw !important;';
    }

    modal.open();

    // Reset styles when modal closes
    modal.addEventListener('close', () => {
        modalWrapper.style.cssText = 'width: 90% !important; max-width: 500px !important;';
        modalHeader.style.display = ''; // Reset the header display
        modalBody.style.maxHeight = '300px'; // Reset the max-height of modal body
    }, { once: true });
}


            function loadImagesForPage(pageNumber) {
                gallery.innerHTML = '';
                const startIndex = (pageNumber - 1) * imagesPerPage;
                const endIndex = Math.min(startIndex + imagesPerPage, images.length);
                const pageImages = images.slice(startIndex, endIndex);

                pageImages.forEach(imageObj => {
                    const imgElement = document.createElement('img');
                    imgElement.src = imageObj.src;
                    imgElement.alt = 'Gallery Image';
                    imgElement.onclick = () => openModal(imageObj.src, imageObj.text);
                    gallery.appendChild(imgElement);
                });
            }

            function updatePaginationNav() {
                paginationNav.innerHTML = '<a href="#" class="item" data-page="prev">Previous</a>';
                for (let i = 1; i <= totalPages; i++) {
                    const classCurrent = i === currentPage ? 'current' : '';
                    paginationNav.innerHTML += `<a href="#" class="item ${classCurrent}" data-page="${i}">${i}</a>`;
                }
                paginationNav.innerHTML += '<a href="#" class="item" data-page="next">Next</a>';
            }

            paginationNav.addEventListener('click', function(event) {
                const target = event.target;
                if (target.tagName === 'A' && target.dataset.page) {
                    if (target.dataset.page === 'prev') {
                        currentPage = Math.max(1, currentPage - 1);
                    } else if (target.dataset.page === 'next') {
                        currentPage = Math.min(totalPages, currentPage + 1);
                    } else {
                        currentPage = parseInt(target.dataset.page);
                    }
                    loadImagesForPage(currentPage);
                    updatePaginationNav();
                }
            });

            updatePaginationNav();
            loadImagesForPage(currentPage);
        });
    </script>
</body>
</html>
